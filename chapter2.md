# 第2章：添削くん誕生 〜AIとの対話で形にする〜

## 最初のリクエスト：願いを言葉にする

Cursorのチャット画面を開いた私は、深呼吸をしました。

「さあ、何を伝えればいいんだろう」

画面に表示されたカーソルが、まるで「話しかけて」と言っているように見えました。私は、迷わずキーボードに打ち込みました。

```
日本語の文章をプロの編集者のように添削してくれるアプリを作りたい
```

Enterキーを押した瞬間、画面が動き出しました。

AIが、何かを考えているようです。数秒後、画面に文字が溢れ出しました。

「画面（フロントエンド）と、頭脳（バックエンド/API）の両方を作りますね」

私は、その言葉を見て、一瞬、理解できませんでした。

「画面？ 頭脳？ 何のこと？」

でも、AIは優しく説明してくれました。

「画面は、ユーザーが見る部分です。入力欄があって、結果が表示される場所です」

「頭脳は、AIと通信する部分です。ユーザーが入力した文章を、Geminiに送って、結果を受け取る場所です」

なるほど。つまり、私たちが作るアプリは、**2つの部品**でできているということですね。

- **見た目の部品**（画面）：`app/page.tsx` というファイル
- **通信の部品**（頭脳）：`app/api/chat/route.ts` というファイル

AIは、この2つを同時に提案してくれました。まるで、レゴブロックの設計図を、一瞬で描いてくれたようなものです。

## コードが「動く」までの実況

### ステップ1：画面の部品を作る

AIが最初に提案してきたのは、**画面の部品**（`app/page.tsx`）でした。

```
'use client';

import { useState } from 'react';
```

この文字列を見て、私はまた圧倒されそうになりました。でも、AIが優しく言ってくれました。

「このコードを、そのまま使ってください。理解する必要はありません」

画面の右側に、**[Apply]** というボタンが表示されていました。私は、迷わずそのボタンをクリックしました。

すると、画面の左側に、新しいファイルが現れました。`app/page.tsx` という名前のファイルです。

「これが、画面の部品なんだ」

私は、そのファイルを開いてみました。中には、たくさんのコードが書かれています。でも、AIが言った通り、読む必要はありません。

「次は、通信の部品を作りましょう」

AIが、次のステップを教えてくれました。

### ステップ2：通信の部品を作る

次に、AIが提案してきたのは、**通信の部品**（`app/api/chat/route.ts`）でした。

```
import { NextRequest, NextResponse } from 'next/server';

export async function POST(request: NextRequest) {
```

このファイルは、ユーザーが入力した文章を、Geminiに送る「通り道」です。

AIは、こう説明してくれました。

「ユーザーが文章を入力すると、この通り道を通って、Geminiに送られます。そして、Geminiが添削した結果が、またこの通り道を通って、画面に戻ってきます」

まるで、手紙を送るような感じです。

1. ユーザーが文章を書く（画面）
2. 手紙をGeminiに送る（通信の通り道）
3. Geminiが添削して返す（通信の通り道）
4. 結果が画面に表示される（画面）

この流れが、2つのファイルで実現されているのです。

また、**[Apply]** ボタンをクリックしました。すると、`app/api/chat/route.ts` というファイルが作られました。

### ステップ3：動かしてみる

2つのファイルができたので、次は動かしてみます。

AIが教えてくれました。

「ターミナルで、`npm run dev` と入力してください」

私は、`Ctrl + @` でターミナルを開き、そのコマンドを打ち込みました。

数秒後、ブラウザが自動的に開き、**真っ白な画面**が表示されました。

「あれ、何も表示されない？」

私は、一瞬、不安になりました。でも、AIが優しく言ってくれました。

「まだ、画面の部品に何も書いていないからです。次は、入力欄とボタンを追加しましょう」

## こだわりの「添削ロジック」：プロの編集者になる

### 最初の試行錯誤

最初に作ったアプリは、確かに動きました。でも、結果を見て、私は少しがっかりしました。

「これ、ただ要約してるだけじゃない？」

AIが返してきたのは、確かに添削された文章でした。でも、「なぜそのように直したのか」という説明がありませんでした。

私は、AIにこう伝えました。

```
添削結果に、「なぜその修正が必要か」を論理的に説明を追加してください
```

すると、AIは、通信の部品（`route.ts`）を修正してくれました。

「System Promptを変更しますね。AIに、『プロの編集者として、修正理由を説明する』という役割を与えます」

### 厳しいけれど優しいプロの編集者

でも、まだ物足りませんでした。

「もっと、プロの編集者らしくしてほしい」

私は、AIにこう伝えました。

```
AIの役割を「厳しいけれど優しいプロの編集者」に設定してください。
単なる修正だけでなく、文章の構成や論理的な流れも整えて、
「なぜそのように直したのか」を3点程度で解説してください。
```

AIは、通信の部品の中にある「System Prompt」という部分を、こう書き換えてくれました。

```
あなたは一流の校閲記者・編集者です。
ユーザーから送られてくる「下書き」を、以下のステップで添削してください。

1. 【添削後の文章】：誤字脱字を直し、論理構成を整えた「完成稿」を提示する。
2. 【修正のポイント】：なぜそのように直したのか、語彙や文法、構成の観点から3点程度で解説する。

※注意：内容への共感や人生相談、過度な励ましは不要です。文章の質を高めることに徹してください。
```

この指示を追加した瞬間、AIの返答が変わりました。

「なるほど、こういうことか」

添削結果を見て、私は感動しました。確かに、プロの編集者が添削してくれたような、論理的で丁寧な説明が返ってくるようになったのです。

### 試行錯誤の連続

でも、完璧ではありませんでした。

「もっと、読みやすくしてほしい」

「エラーメッセージがわかりにくい」

「画面のデザインをもっと見やすくしてほしい」

毎回、AIに伝えると、すぐに修正してくれました。まるで、一緒に作品を作り上げているような感覚でした。

## 【コラム】プロンプトのコツ：うまく伝える魔法の言葉

### 「うまく動かない」と思った時

実際にアプリを作っていると、何度も「うまく動かない」という場面に遭遇します。

最初は、私はこう言っていました。

```
動かない
```

でも、AIは、何が問題なのかわかりませんでした。

### 具体的に伝える

次に、私はこう言ってみました。

```
エラーメッセージが出ています。詳細がわかりません
```

すると、AIは、エラーメッセージを詳しく表示するように、コードを修正してくれました。

**コツ1：何が問題なのか、具体的に伝える**

- ❌ 「動かない」
- ✅ 「エラーメッセージが出ています。詳細がわかりません」

### 「思っていたのと違う」と思った時

添削結果が、期待と違うこともありました。

最初は、こう言っていました。

```
違う
```

でも、これでは、AIも何をどう変えればいいのかわかりません。

次に、私はこう言ってみました。

```
添削結果が、ただ要約しているだけです。
「なぜその修正が必要か」という説明を追加してください
```

すると、AIは、System Promptを修正して、説明を追加するようにしてくれました。

**コツ2：どうなってほしいのか、具体的に伝える**

- ❌ 「違う」
- ✅ 「添削結果が、ただ要約しているだけです。『なぜその修正が必要か』という説明を追加してください」

### 段階的に改善する

完璧を求めすぎると、かえってうまくいきません。

私は、最初は「動けばいい」と思っていました。そして、動いたら「もっと見やすく」、見やすくなったら「もっと使いやすく」と、段階的に改善していきました。

**コツ3：一度に全部を変えようとしない**

- ❌ 「完璧なアプリを作って」
- ✅ 「まずは動くようにして。次に、見た目を整えましょう」

### 実際に使った指示文の例

以下は、私が実際にAIに伝えた指示文です。参考にしてください。

#### 画面の見た目を変える時

```
画面の背景色を、真っ黒に近いグレーではなく、
もう少し柔らかいダークグレー（#1e1e1e）に変更してください。
文字の色も、完全な白ではなく、目に優しいオフホワイト（#e0e0e0）にしてください。
```

#### エラーメッセージを改善する時

```
OpenRouter APIからのエラーレスポンスが出ていますが、詳細がわかりません。
エラーメッセージに、ステータスコードと詳細情報を含めてください。
```

#### 機能を追加する時

```
ユーザーが入力したAPIキーを、ブラウザに保存する機能を追加してください。
次回アクセスした時に、自動的に入力されるようにしてください。
```

#### 動作を確認する時

```
このコードで、本当に動くか確認してください。
エラーが出る可能性がある箇所があれば、教えてください。
```

### 魔法の言葉：「〜してください」

AIに指示を出す時、一番大切なのは、**「〜してください」という丁寧な言葉**です。

- 「〜して」→ 命令形で、AIが混乱する可能性がある
- 「〜してください」→ 丁寧な依頼で、AIが理解しやすい

これは、AIとの対話で、私が学んだ最も大切なことの一つです。

## 完成への道のり

こうして、何度もAIと対話を重ねながら、アプリは少しずつ形になっていきました。

最初は、真っ白な画面に「Hello World」と表示されるだけでした。

次に、入力欄が現れました。

そして、ボタンを押すと、AIが返答を返すようになりました。

最後に、見た目を整えて、エラーメッセージを改善して、APIキーを保存する機能を追加して...

気づいたら、**「プロの添削くん」**という、世界に一つだけのアプリが完成していました。

## 次のステップへ

画面の部品と、通信の部品。この2つが揃えば、AIアプリは動きます。

でも、まだ終わりではありません。次は、このアプリを**パソコンで動くアプリ**にする作業が待っています。

ブラウザを開かなくても、デスクトップのアイコンをダブルクリックするだけで、アプリが立ち上がる。

そんな夢のような話が、次の章で現実になります。

---

**第2章のポイント**
- ✅ AIに「何を作りたいか」を具体的に伝える
- ✅ 画面の部品（page.tsx）と通信の部品（route.ts）の2つを作る
- ✅ [Apply]ボタンを押すだけで、コードが適用される
- ✅ 「うまく動かない」時は、具体的に問題を伝える
- ✅ 「思っていたのと違う」時は、どうなってほしいかを伝える
- ✅ 段階的に改善していく
- ✅ 「〜してください」という丁寧な言葉を使う
