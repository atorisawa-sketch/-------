# 第5章：製品化編 〜デスクトップアプリの誕生と、最後の戦い〜

## Electronとの出会い

Webアプリは完成しました。でも、私は、もっと「本物のアプリ」にしたかった。

「ブラウザを開かなくても、デスクトップのアイコンをダブルクリックするだけで、アプリが立ち上がる」

そんな夢を、AIに伝えました。

「デスクトップアプリにしたいです」

AIは、すぐに答えをくれました。

「Electronを使いましょう。Webアプリを、デスクトップアプリに変換できます」

### Electronとは

AIは、優しく説明してくれました。

「Electronは、Webアプリを、パソコンで動くアプリに変換するツールです。Chromeブラウザーの技術を使っているので、Webアプリをそのまま使えます」

つまり、今まで作ったWebアプリを、**そのまま**デスクトップアプリにできるということです。

「すごい...本当にできるの？」

私は、半信半疑でした。でも、AIが提案してくれた手順に従って、進めていくことにしました。

## 実録：エラーの三連星との戦い

### 戦い①：ポート重複エラー

最初の試練は、すぐに訪れました。

Electronアプリを起動しようとした瞬間、画面に真っ赤なエラーメッセージが表示されました。

```
Error: listen EADDRINUSE: address already in use :::3000
```

「なにこれ...」

私は、そのエラーメッセージを見て、一瞬、凍りつきました。

「ポート3000が使われています」

AIが、優しく説明してくれました。

「ポートというのは、アプリが通信するための『窓口』です。他のアプリが、すでにポート3000を使っているので、新しいアプリが使えません」

「どうすればいいの？」

私は、パニックになりかけました。でも、AIは、すぐに解決策を教えてくれました。

「ポート番号を変更しましょう。3000の代わりに、3005を使います」

AIは、`package.json` と `main.js` を修正してくれました。

```json
"electron:dev": "concurrently \"next dev -p 3005\" \"wait-on http://localhost:3005 && electron .\""
```

```javascript
const url = isDev
  ? 'http://localhost:3005'
  : 'https://tensaku-kun.vercel.app/';
```

「これで、ポート3005を使うようになりました」

私は、もう一度、Electronアプリを起動してみました。

「動いた...動いた！」

画面に、アプリが表示されました。最初の戦いで、勝利を収めたのです。

### 戦い②：恐怖のJavaScriptエラー

でも、喜びは長く続きませんでした。

次に起動した時、またエラーメッセージが表示されました。

```
SyntaxError: Unexpected token }
```

「またエラー...」

私は、そのエラーメッセージを見て、また凍りつきました。

「JavaScriptの構文エラーです」

AIが、説明してくれました。

「カッコ `{ }` が、正しく閉じられていません。一つのカッコが足りないか、多すぎる可能性があります」

「どこが間違ってるの？」

私は、コードを見つめました。でも、どこが間違っているのか、さっぱりわかりません。

「一緒に確認しましょう」

AIは、優しく言ってくれました。そして、`main.js` のコードを、一行ずつ確認していきました。

```javascript
app.on('ready', createWindow);

app.on('window-all-closed', () => {
  if (process.platform !== 'darwin') {
    app.quit();
  }
});

app.on('activate', () => {
  if (mainWindow === null) {
    createWindow();
  }
});
```

「ここです」

AIが、指摘してくれました。

「`app.on('ready', createWindow);` の後、カッコが閉じられていませんでした。修正しますね」

AIは、コードを修正してくれました。

```javascript
app.whenReady().then(() => {
  createWindow();

  app.on('activate', () => {
    if (BrowserWindow.getAllWindows().length === 0) {
      createWindow();
    }
  });
});
```

「これで、正しく動くはずです」

私は、もう一度、Electronアプリを起動してみました。

「動いた...今度こそ動いた！」

画面に、アプリが表示されました。2つ目の戦いで、勝利を収めたのです。

### 戦い③：アクセス拒否事件

でも、最後の試練が、まだ待っていました。

`.exe` ファイルを作ろうとした時、またエラーメッセージが表示されました。

```
Error: EPERM: operation not permitted
```

「またエラー...」

私は、そのエラーメッセージを見て、また凍りつきました。

「アクセスが拒否されました」

AIが、説明してくれました。

「他のプロセスが、ファイルを使っている可能性があります。タスクマネージャーで、プロセスを確認しましょう」

「タスクマネージャー？」

私は、タスクマネージャーを開きました。すると、たくさんのプロセスが表示されました。

「どれが悪いの？」

私は、どれを終了すればいいのか、わかりませんでした。

「`node.exe` や `electron.exe` というプロセスを探してください」

AIが、教えてくれました。

私は、タスクマネージャーで、`node.exe` と `electron.exe` を探しました。すると、いくつか見つかりました。

「これらを終了してください」

AIが、言いました。

私は、それらのプロセスを右クリックして、「タスクの終了」を選択しました。

「これで、ファイルが解放されたはずです」

AIが、言いました。

私は、もう一度、`.exe` ファイルを作ろうとしました。

「動いた...今度こそ動いた！」

ビルドが成功しました。3つ目の戦いで、勝利を収めたのです。

## .exeの誕生

### ビルドの実行

すべてのエラーを解決した後、いよいよ `.exe` ファイルを作る時が来ました。

「`npm run dist` というコマンドを実行してください」

AIが、教えてくれました。

私は、ターミナルで、そのコマンドを実行しました。

```
npm run dist
```

数分後、画面に「Build successful」という文字が表示されました。

「できた...できた！」

私は、`dist` フォルダを開きました。すると、そこに、`.exe` ファイルが存在していました。

`Pro-Tensaku-Kun Setup 0.1.0.exe`

「これが、私のアプリのインストーラー...」

私は、そのファイルを見つめて、感動に包まれました。

### 最初の起動

「試してみよう」

私は、その `.exe` ファイルをダブルクリックしました。

インストーラーが起動し、数秒後、アプリがインストールされました。

「起動してみよう」

デスクトップに作成されたアイコンを、ダブルクリックしました。

すると、**独立したウィンドウ**が開きました。

「すごい...本当に動いてる」

ブラウザではなく、独立したアプリとして、動いていました。

### デベロッパーツールのない、スッキリした画面

でも、何か違和感を覚えました。

「あれ、検証画面（デベロッパーツール）がない？」

ブラウザで動いていた時は、F12キーを押すと、検証画面が開いていました。でも、今のアプリには、それがありません。

「これが、製品版です」

AIが、説明してくれました。

「デベロッパーツールは、開発中だけ使うものです。製品版では、表示されません」

「なるほど...」

私は、画面を見つめました。

スッキリとした、美しい画面。検証画面もなく、余計なものもない。

「これが、本当のアプリだ」

私は、その画面を見て、震えるような感動を覚えました。

## おわりに

### 2日前まで「一行も書けなかった」自分

2日前まで、私は、一行のコードも書けませんでした。

「プログラミングは、選ばれし人だけができること」

そう思っていました。

でも、今、私は、**「アプリ開発者」**です。

- Webアプリを作り
- デスクトップアプリに変換し
- `.exe` ファイルを作り
- 世界中の人に使ってもらえる

そんなことが、本当にできるようになりました。

### AIは代行者ではなく、相棒

でも、これは、AIが全部やってくれたわけではありません。

- 「何を作りたいか」を考えるのは、私でした
- 「どう改善したいか」を伝えるのは、私でした
- 「エラーが出た時、どう対処するか」を決めるのは、私でした

AIは、**代行者**ではなく、**相棒**でした。

私の可能性を広げてくれる、最強の相棒。

### あなたの隣にも、相棒がいる

もし、あなたが「自分には無理だ」と諦めかけているなら、ぜひ、この本を閉じて、Cursorを開いてみてください。

あなたの隣にも、最強の相棒が座っています。

- コードが書けなくても、大丈夫
- エラーが出ても、大丈夫
- パニックになっても、大丈夫

AIが、一緒に解決してくれます。

### 最後のメッセージ

「一行も書けない」から始まった、この2日間の冒険。

でも、今、私は、**「アプリ開発者」**です。

あなたも、きっと、なれます。

AIという相棒と一緒に、一歩ずつ、進んでいけば。

---

**第5章のポイント**
- ✅ Electronで、Webアプリをデスクトップアプリに変換できる
- ✅ ポート重複エラーは、ポート番号を変更すれば解決できる
- ✅ JavaScriptエラーは、AIと一緒に一行ずつ確認すれば解決できる
- ✅ アクセス拒否エラーは、タスクマネージャーでプロセスを終了すれば解決できる
- ✅ `.exe` ファイルを作れば、誰でも使えるアプリになる
- ✅ デベロッパーツールのない、スッキリした画面が製品版
- ✅ AIは代行者ではなく、自分の可能性を広げてくれる相棒

---

**完**
